CiscoACI(Cisco Application Centric Infrastructure)　ciscoによって提供されているデータデンター向けのSDNソリューション。SDNコントローラにはsisco独自のAPIC(Application Policy Infrastructure Controller)を使用、サウスバウンドAPIにはcisco独自のOpFlexを使用する。
※ソリューション　解決方法とか手段とか
OpFlexはOpenFlowと比較してシンプルなネットワークポリシーを定義するだけでSDNを構築できるというメリットがある。
※ポリシー　政策,方針,手段　ITとして明確な定義こそないが、おおむね利用条件や運用条件の規定という意味。これに従ってネットワークを構築する。


ファブリック型ネットワーク　メッシュ構造にすることで高可用性,帯域,拡張性の向上を実現することができるネットワークのこと。サーバの仮想化が一般化したネットワークに適している。2,3階層のモデルはコア層から枝分かれしている様子からツリー型とも呼ばれる。

スパインリーフ型　ファブリックネットワークをスパンスイッチ,スパインリーフによって形成されたトポロジのこと。すべてL3スイッチで構成されているため、従来ディストリビューション層に集中していた負荷をリーフスイッチに分散できる。2階層のシンプルな構成で、拡張もスムーズに行うことができ配線の煩雑さを抑える利点がある。。エンドポイントの接続ポートを増やす場合はリーフスイッチの増設。帯域を増やす場合はスパインスイッチの増設。

IBN(Intent Based Network)　ネットワークの運用に必要なタスクを実行,自動化する方法をネットワークソフトウェアで自動的に判断することで実現する概念。リーフスイッチに接続しているエンドポイントのサーバなどを、機器ごとの分類によってEPG(End Point Group)というグループに分かれる。EPG間の通信を許可・拒否する通信ポリシーを作成し適用することで動的にネットワークを構成する。グループ単位でポリシーを決定できるため、シンプルな定義のみでネットワーク全体の通信ルールを設定できる。外部ネットワークの機器はwebサーバと通信できるがアプリケーションサーバやDBサーバとは通信できない。


上記までのネットワークはNexus9000シリーズのような高価なスイッチが必要(一つ150~500万円)。くそ高いため以下のようなモノが開発された。

APIC-EM(APIC-Enterprise Module) 一般的な企業や組織向けに作られたSDNコントローラのこと。ライセンス不要で無料ダウンロードが可能。既存のネットワーク機器でもSDNが実現可能。TELNET,SSH,SNMPを介してマネジメントプレーンを制御でき、各機器をAPIC-EMの制御下に置く。

Cisco SD-Access(Cisco Software-Defined Access)　ciscoが提供する企業向けの新しいSDNソリューション。SDNコントローラにCisco DNA Centerを使用し、WebGUIで提供される各種アプリケーションや自作プログラムで制御できる。ファブリックネットワークにおいてアンダーレイネットワーク,オーバレイネットワークという考え方を取り入れている。

Cisco DNA Center　SDNコントローラ。自動化,ポリシー,アシュアランス,統合を実現するインフラストラクチャ。ネットワークを自動的に検出、プロビジョニング,導入するための規範的なLAN自動化サービスを提供する。デバイスを検出すると、自動化されたアンダーレイのプロビジョニング機能がプラグアンドプレイを使用して必要なルーティングプロトコルとIPアドレスを設定する。IS-ISまたはOSPFが使用される。ノースバウンドAPIはREST API、サウスバウンドAPIはTELNET,SSH,SNMPなどの複数のプロトコルをサポートしている。GUIにてポリシーやネットワークの設定ができ、SD-Accessファブリック全体を一元管理できる。EasyQoSによって、QoSの設定もGUIからポリシーを選択して機器に適用できる。

SD-Accessファブリック　物理的,論理的なネットワーク。フォワーディングインフラストラクチャ。アンダーレイとオーバーレイの組み合わせのこと。

SD-Accessのコンポーネント(要するにアンダーレイか？)
〇ファブリックコントロールプレーンノード　一元化したDBとして機能して、すべてのユーザとデバイスをファブリックネットワークへの接続時とローミング時にトラッキングするノード。LISPのMS/MA機能をベースにしている。
〇ファブリックボーダーノード　SD-Accessファブリックを従来のL2,L3ネットワークもしくは別のファブリックに接続する役割を担うノード。
〇ファブリックエッジノード　エンドポイントをファブリックに接続し、エンドポイントとファブリック間のトラフィックをカプセル,非カプセル化して転送する役割のノード


Cisco DNA ソフトウェア　自動化,セキュリティ,予測型モニタリング,ポリシー主導アプローチによりインテリジェントネットワークを実現する。

Cisco ISE(Identify Services Engine)　IBNを実現するための認証とポリシー管理をする。セキュリティアプライアンス。ユーザとデバイスにインテントベースのポリシーを配信できる。

Devnet　オープンAPIにより、エンタープライズ全体に自動化を拡張する。

アンダーレイ　オーバーレイの機能を提供するための基盤となる物理ネットワークのこと。Cisco SD-Accessでは位置と役割から3つに分けられる。
・エッジノード　エンドポイントデバイスに接続する機器
・ボーダーノード　Cisco SD-Accessの制御外の機器であるWANルータなどと接続する機器
・コントロールノード　LISPのマップサーバとして動作する機器

オーバーレイ　アンダーレイの上に構築される論理的なネットワークのこと。VXLANとLISPの2つの機能から成り立っている。
・VXLAN(Virtual eXtensible LAN)L2フレームをカプセル化することで、L3ネットワーク上に論理的なL2ネットワークを構築できる技術。VXLANヘッダ(8バイト)に格納されたVNI(VXLAN Network ID)によってネットワークを識別できる。VNIは24ビットあるため、約1600万のネットワークを識別できる。同じVNIが割り当てられたデバイス同士でL3ネットワークをまたいでVXLANを構築できる。

オーバーレイのコンポーネント
〇ファブリックデータプレーン　VXLANとGPO(Group Policy Option)を使用してパケットをカプセル化することで論理オーバーレイが作成される。
〇ファブリックコントロールプレーン　LISPによりVXLANトンネルエンドポイントに関連付けられたユーザとデバイスが論理的にマッピングされて解決される。
〇ファブリックポリシープレーン　アドレスに依存しないSGT(Scalable Group Tag)とグループベースのポリシーを使用して、ビジネス上の意図がネットワークポリシーに変換される。

SGT　管理者が定義したデバイスやユーザをまとめたグループに割り当てられるタグ。スケーラブルグループ自体はGUI上で設定できる。


LISP(Locator/Identifer Separation Protocol)　IPアドレスのIDとして、ロケータとして機能を分離してルーティングを行うトンネリングプロトコル。UDPを使用する。LISPを利用することでファブリック上の各エッジノードは全エッジノードのアドレスとネクストホップを知ることなく通信ができる。
＞EID(Endpoint Identifer)　ホストのIPアドレス
＞RLOC(Routing Locator)　LISPを有効にしているルータのIPアドレス
＞ITR(Ingress Tunnel Router)　LANからWANへの入り口ルータ。EIDとRLOCとの紐づけ{mapping}を問い合わせる[Map-Request]。LISPでカプセル化を行いWANへ送信する。
＞ETR(Egress Tunnel Router)　WANからLANへの出口ルータ。EIDとRLOCのMappingをMap-serverに登録する(Map-Register)。LISAのカプセル化を解除してLANに送信する。Map-Requestに応じてMap-Replyを返す。
＞xTR　ITR/ETRの両方の役割を担う。LISP siteのエッジルータとなる。MS/MRと同居可能。
＞PxTR(Proxy xTR)　LISPサイトとnon-LISPサイト間の通信を担う。代わりにNATを利用することでも対応可能。
＞MS/MR(Map-Server/Map-Resolver)　MSとMRを別々の機器にすることも可能。MSはMAP-registerを受信してEIDとRLOCのMappingを管理する。MRはMap-Requestを受信してMSへ転送する。

LISPの流れ
①PCからサーバへ通信を行う際に、ITRはサーバのEIDがどこのETR,RLOCにいるのかMap-requestでMS/MRへ問い合わせる。
②MS/MRはITRからのMap-requestを受信してサーバーのいるETRへMap-Requestを送信する。
③ETRはMS/MRからのMap-Requestを受信してITRへMap-Replyを送信する。ITRはETRからのMap-Replyを受け取ってサーバがどこにいるのかを把握する。ここでサーバのIPアドレスとLISPのIPアドレスを知ることができる。

LISPでのデータ送信
①PCはサーバEIDあてのパケットを送信してITRが受け取る。
②ITRはEIDとRLOCのMapping情報から外側のヘッダとLISPヘッダでカプセル化する。
③RLOC内では外側ヘッダのIPアドレスを使ってルーティングされる。
④ETRに到着したデータを非カプセル化してサーバに連想する。